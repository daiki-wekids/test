<html>
	<head>
		<meta charset="utf-8">
		<title>
			2048 test
		</title>
		<script>
			(function() {
				var row = 4;	//マスの数
				var col = 4;

				var randTile1 = Math.floor( Math.random() * 2 ) + 1 ;	// 1or2 をrandTile1に入れる
				var randTile2 = Math.floor( Math.random() * 2 ) + 1 ;

				var randRow1 = Math.floor( Math.random() * (row - 1) ) + 1 ;	// 1 ~ 4 をrandRow1に入れる
				var randCol1 = Math.floor( Math.random() * (col - 1) ) + 1 ;
				var randRow2 = Math.floor( Math.random() * (row - 1) ) + 1 ;
				var randCol2 = Math.floor( Math.random() * (col - 1) ) + 1 ;

						if(randRow1===randRow2 && randCol1===randCol2) {	// ランダムマスが被ったら書き換える
							randRow2 = (row + 1) - randRow2;
							randCol2 = (col + 1) - randCol2;
						}

				var showBoard = function() {
					var b = document.getElementById("board");
					
					for(var y = 1; y <= col; y++) {
						for(var x = 1; x <= row; x++) {
							var c = piece[board[x][y]].cloneNode(true);
							c.style.left = ((x - 1) * 68) + "px";
							c.style.top = ((y - 1) * 68) + "px";
							b.appendChild(c);

							/*	クリックした場所に2を出すテスト
							if(board[x][y] == 0) {
								(function() {
									var _x = x, _y = y;
									c.onclick = function() {
										board[_x][_y] = 1;
										showBoard();
									};
								})();
							}
							*/
						}
					}
				}
				var board = [];
				onload = function() {
					piece = [document.getElementById("cell"),	//配列　0
							 document.getElementById("2"),		// 1
							 document.getElementById("4"),		// 2
							 document.getElementById("8"),		// 3
							 document.getElementById("16"),		// 4
							 document.getElementById("32"),		// 5
							 document.getElementById("64"),		// 6
							 document.getElementById("128"),	// 7
							 document.getElementById("256"),	// 8
							 document.getElementById("512"),	// 9
							 document.getElementById("1024"),	// 10
							 document.getElementById("2048"),];	// 11
					for(var i = 0; i <= col; i++){
						board[i] = [];
						for(var j = 0; j <= row; j++){
							board[i][j] = 0;
						}
					}
					board[randRow1][randCol1] = randTile1;
					board[randRow2][randCol2] = randTile2;

					/*	全タイル表示テスト
					board[1][1] = 1;
					board[1][2] = 2;
					board[1][3] = 3;
					board[1][4] = 4;
					board[2][1] = 5;
					board[2][2] = 6;
					board[2][3] = 7;
					board[2][4] = 8;
					board[3][1] = 9;
					board[3][2] = 10;
					board[3][3] = 11;
					*/

					showBoard();
				};

			})();
		
			function NewGameClick() {
     		location.reload();	// ブラウザが更新されるだけ
   			}

   			function LeftClick() {
     		target = document.getElementById("output");
     		target.innerHTML = "Left Clicked";
   			}

   			function UpClick() {
     		target = document.getElementById("output");
     		target.innerHTML = "Up Clicked";
   			}

   			function DownClick() {
     		target = document.getElementById("output");
     		target.innerHTML = "Down Clicked";
   			}

   			function RightClick() {
     		target = document.getElementById("output");
     		target.innerHTML = "Right Clicked";
   			}

   			function TestClick() {
     		target = document.getElementById("output");
     		target.innerHTML = "Test Clicked";
   			}

		</script>
	</head>

	<body>
		<h2>2048 test</h2>
		<input type="button" value="NewGame" onclick="NewGameClick();"/>　
		<input type="button" value="←" onclick="LeftClick();"/>
		<input type="button" value="↑" onclick="UpClick();"/>
		<input type="button" value="↓" onclick="DownClick();"/>
		<input type="button" value="→" onclick="RightClick();"/>
		<input type="button" value="Test" onclick="TestClick();"/>

		<div style = "position:relative" id = "output">output</div>
		<div style = "display:none">
			<div id = "cell" style = "position:absolute; width:64px; height:64px; background-color:#0f0">
			</div>
			<div id = "2" style = "position:absolute; width:64px; height:64px; background-color:#0ff; text-align:center;">2
			</div>
			<div id = "4" style = "position:absolute; width:64px; height:64px; background-color:#0dd; text-align:center;">4
			</div>
			<div id = "8" style = "position:absolute; width:64px; height:64px; background-color:#0bb; text-align:center;">8
			</div>
			<div id = "16" style = "position:absolute; width:64px; height:64px; background-color:#099; text-align:center;">16
			</div>
			<div id = "32" style = "position:absolute; width:64px; height:64px; background-color:#077; text-align:center; color:#fff;">32
			</div>
			<div id = "64" style = "position:absolute; width:64px; height:64px; background-color:#055; text-align:center; color:#fff;">64
			</div>
			<div id = "128" style = "position:absolute; width:64px; height:64px; background-color:#033; text-align:center; color:#fff;">128
			</div>
			<div id = "256" style = "position:absolute; width:64px; height:64px; background-color:#011; text-align:center; color:#fff;">256
			</div>
			<div id = "512" style = "position:absolute; width:64px; height:64px; background-color:#e00; text-align:center; color:#fff;">512
			</div>
			<div id = "1024" style = "position:absolute; width:64px; height:64px; background-color:#e00; text-align:center; color:#fff;">1024
			</div>
			<div id = "2048" style = "position:absolute; width:64px; height:64px; background-color:#e00; text-align:center; color:#fff;">2048
			</div>
		</div>

		<div style = "position:relative" id = "board"></div>
	</body>
</html>